<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>小海的做夢故事 | 交易與人生的實踐</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Sans+TC:wght@300;400;500;700;900&display=swap" rel="stylesheet">
    <script src="https://unpkg.com/lucide@latest"></script>
    <style>
        body { font-family: 'Noto Sans TC', sans-serif; scroll-behavior: smooth; }
        .hero-bg { background: linear-gradient(135deg, #0f172a 0%, #1e293b 100%); position: relative; overflow: hidden; }
        .hero-pattern { position: absolute; width: 100%; height: 100%; background-image: radial-gradient(#3b82f6 1px, transparent 1px); background-size: 40px 40px; opacity: 0.1; }
        .card-hover:hover { transform: translateY(-5px); box-shadow: 0 10px 25px -5px rgba(0, 0, 0, 0.1), 0 8px 10px -6px rgba(0, 0, 0, 0.1); }
        .avatar-float { animation: float 6s ease-in-out infinite; }
        @keyframes float { 0% { transform: translateY(0px); } 50% { transform: translateY(-20px); } 100% { transform: translateY(0px); } }
    </style>
</head>
<body class="bg-slate-50 text-slate-800 flex flex-col min-h-screen">
    <nav class="bg-white/90 backdrop-blur-md fixed w-full z-50 border-b border-slate-200">
        <div class="max-w-7xl mx-auto px-4 py-3 flex justify-between items-center gap-2">
            <div class="flex items-center gap-2 flex-shrink-0">
                <div class="bg-blue-600 text-white p-1.5 rounded-lg"><i data-lucide="waves" class="w-5 h-5"></i></div>
                <div class="flex flex-col leading-none">
                    <span class="font-black text-sm md:text-lg tracking-tight text-slate-900">小海的做夢故事</span>
                    <span class="font-bold text-[10px] md:text-xs text-blue-600 tracking-widest">TRADING</span>
                </div>
            </div>
            <div class="hidden md:flex gap-6 text-sm font-medium text-slate-600 items-center">
                <a href="daily.html" class="hover:text-blue-600 transition flex items-center gap-1"><i data-lucide="newspaper" class="w-4 h-4"></i> 小海觀察室</a>
                <a href="mindset.html" class="hover:text-purple-600 transition flex items-center gap-1"><i data-lucide="brain-circuit" class="w-4 h-4"></i> 心態分享</a>
            </div>
            <div class="flex items-center gap-2 md:gap-4">
                <a href="premium.html" class="text-slate-600 hover:text-yellow-600 p-2 flex items-center gap-1 font-bold transition">
                    <i data-lucide="shield-check" class="w-5 h-5 text-yellow-500"></i>
                    <span class="hidden md:inline text-sm">小海特訓室</span>
                </a>
                <a href="https://www.pressplay.cc/project/F563D1F022D0FAA8F9D81A02C05C8092/about?oid=2595E86847#act=auto-follow" target="_blank" class="bg-red-600 hover:bg-red-500 text-white px-3 py-2 md:px-5 md:py-2.5 rounded-full font-bold text-xs md:text-sm transition flex items-center gap-1 shadow-md shadow-red-600/20 whitespace-nowrap">
                    <i data-lucide="star" class="w-3 h-3 md:w-4 md:h-4 fill-current"></i>訂閱小海專案
                </a>
            </div>
        </div>
    </nav>

    <header class="hero-bg text-white pt-24 pb-16 md:pt-32 md:pb-24 px-4 relative">
        <div class="hero-pattern"></div>
        <div class="max-w-6xl mx-auto relative z-10 flex flex-col md:flex-row items-center justify-center gap-8 md:gap-16">
            <div class="text-center md:text-left flex-1">
                <h1 class="text-4xl md:text-6xl font-black mb-6 leading-tight tracking-tight">從做夢到實踐<br><span class="text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300">交易的一千零一夜</span></h1>
                <div class="flex flex-col sm:flex-row gap-3 justify-center md:justify-start">
                    <a href="daily.html" class="bg-blue-600 hover:bg-blue-500 text-white px-6 py-3.5 rounded-xl font-bold transition flex items-center justify-center gap-2 shadow-lg">小海觀察室</a>
                    <a href="premium.html" class="bg-yellow-500 hover:bg-yellow-400 text-slate-900 px-6 py-3.5 rounded-xl font-bold transition flex items-center justify-center gap-2 shadow-lg">進入特訓室</a>
                </div>
            </div>
            <div class="relative w-48 h-48 md:w-96 md:h-96 flex-shrink-0 avatar-float flex items-center justify-center">
                <img id="fallback-avatar" src="https://api.dicebear.com/9.x/adventurer/svg?seed=LittleSea&backgroundColor=b6e3f4" alt="小海" class="w-full h-full object-contain relative z-10 drop-shadow-2xl">
            </div>
        </div>
    </header>

    <section id="resources" class="py-16 bg-slate-100 px-4">
        <div class="max-w-7xl mx-auto grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6">
            <a href="daily.html" class="group bg-white rounded-2xl overflow-hidden shadow-sm card-hover transition duration-300 block relative border border-slate-200">
                <div class="h-32 bg-gradient-to-br from-blue-600 to-blue-800 flex items-center justify-center"><i data-lucide="newspaper" class="w-10 h-10 text-white"></i></div>
                <div class="p-5"><h3 class="text-lg font-bold text-slate-900 mb-2">小海觀察室</h3><p id="latest-article-title" class="text-slate-600 text-xs mb-3 line-clamp-2 min-h-[2.5em]">載入最新文章中...</p><span class="text-blue-600 font-bold text-xs flex items-center">閱讀全文 <i data-lucide="arrow-right" class="w-3 h-3 ml-1"></i></span></div>
            </a>
            </div>
    </section>

    <footer class="bg-slate-900 text-white py-8 mt-auto">
        <div class="max-w-4xl mx-auto px-4 text-center">
            <div class="flex justify-between items-center text-sm text-slate-500">
                <span>&copy; 2025 小海的做夢故事. All rights reserved.</span>
                <a href="admin.html" class="opacity-10 hover:opacity-100 p-2"><i data-lucide="lock" class="w-4 h-4"></i></a>
            </div>
        </div>
    </footer>

    <script>lucide.createIcons();</script>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getFirestore, collection, getDocs, query, orderBy, limit } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBi7FXRLt9qiVNa-qipPo-OD-b_qseQHUQ",
            authDomain: "gen-lang-client-0733075059.firebaseapp.com",
            projectId: "gen-lang-client-0733075059",
            storageBucket: "gen-lang-client-0733075059.firebasestorage.app",
            messagingSenderId: "561243064522",
            appId: "1:561243064522:web:cdfffd357c9af417b08c33",
            measurementId: "G-D93F1E1GR3"
        };

        const app = initializeApp(firebaseConfig);
        const db = getFirestore(app, "seawebfire"); // ✅ 指向正確資料庫名

        async function loadLatestTitle() {
            const titleEl = document.getElementById('latest-article-title');
            if (!titleEl) return;
            const q = query(collection(db, "posts"), orderBy("timestamp", "desc"), limit(1));
            try {
                const querySnapshot = await getDocs(q);
                if (!querySnapshot.empty) {
                    titleEl.innerText = querySnapshot.docs[0].data().title;
                    titleEl.classList.add("font-bold", "text-slate-800");
                } else { titleEl.innerText = "目前尚無文章"; }
            } catch (e) { titleEl.innerText = "點擊查看每日更新"; }
        }
        // ✅ 確保 DOM 載入後才執行，解決 null 報錯
        window.addEventListener('load', loadLatestTitle);
    </script>
</body>
</html>