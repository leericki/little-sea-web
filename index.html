<script type="module">
    import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
    import { getFirestore, collection, getDocs, query, orderBy, limit } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore.js";

    const firebaseConfig = {
        apiKey: "AIzaSyBi7FXRLt9qiVNa-qipPo-OD-b_qseQHUQ",
        authDomain: "gen-lang-client-0733075059.firebaseapp.com",
        projectId: "gen-lang-client-0733075059",
        storageBucket: "gen-lang-client-0733075059.firebasestorage.app",
        messagingSenderId: "561243064522",
        appId: "1:561243064522:web:cdfffd357c9af417b08c33",
        measurementId: "G-D93F1E1GR3"
    };

    const app = initializeApp(firebaseConfig);
    const db = getFirestore(app, "seawebfire"); // ✅ 指定正確資料庫

    async function loadLatestTitle() {
        const titleEl = document.getElementById('latest-article-title');
        const q = query(collection(db, "posts"), orderBy("timestamp", "desc"), limit(1));
        try {
            const querySnapshot = await getDocs(q);
            if (!querySnapshot.empty) {
                const data = querySnapshot.docs[0].data();
                titleEl.innerText = data.title;
                titleEl.classList.add("font-bold", "text-slate-800");
            } else {
                titleEl.innerText = "目前尚無文章";
            }
        } catch (e) {
            titleEl.innerText = "點擊查看每日更新";
        }
    }
    loadLatestTitle();
</script>